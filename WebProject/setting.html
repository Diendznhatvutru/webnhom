<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
    <title>Setting</title>
    <style>
      /* General styles */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: Arial, sans-serif;
      }

      body {
        background: #f9f9f9;
        color: #333;
        transition: background-color 0.3s, color 0.3s;
      }

      /* Container */
      .container {
        max-width: 480px;
        margin: 0 auto;
        background: white;
        min-height: 100vh;
      }

      /* Header */
      .header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 15px;
        background-color: #fff;
        border-bottom: 1px solid #ddd;
      }

      .header h1 {
        font-size: 18px;
        color: #000;
        flex: 1;
        text-align: center;
      }

      .header .back-button,
      .header .home-button {
        color: #000;
        font-size: 20px;
        text-decoration: none;
      }

      /* Settings Section */
      .settings {
        padding: 15px;
      }

      .section {
        margin-bottom: 20px;
      }

      .section h2 {
        font-size: 16px;
        color: #555;
        margin-bottom: 10px;
      }

      /* Setting Item */
      .setting-item {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 10px 15px;
        background: #fff;
        border: 1px solid #eee;
        border-radius: 8px;
        margin-bottom: 15px;
        cursor: pointer;
        transition: background-color 0.3s;
      }

      .setting-item:hover {
        background-color: #f0f8ff;
      }

      .setting-item i {
        font-size: 20px;
        color: #0066ff;
      }

      .setting-item span {
        flex: 1;
        margin-left: 10px;
        font-size: 14px;
        color: #333;
      }

      /* Theme Options */
      .theme-options {
        margin-top: 10px;
        padding-left: 20px;
      }

      .theme-option {
        display: flex;
        align-items: center;
        margin-bottom: 10px;
      }

      .theme-option input {
        margin-right: 10px;
      }

      .theme-option label {
        font-size: 14px;
        color: var(--text-color, #333);
      }

      /* Device Management Section */
      .device-management {
        padding: 15px;
        background: #f9f9f9;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }

      .device-item {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 10px 15px;
        border: 1px solid #ddd;
        border-radius: 8px;
        margin-bottom: 10px;
        background: #fdfdff;
      }

      .device-item .device-name {
        display: flex;
        align-items: center;
      }

      .device-item input[type="checkbox"] {
        margin-right: 10px;
      }

      .device-item .status {
        padding: 5px 10px;
        background: #e7f7ec;
        color: #2ebf59;
        border-radius: 15px;
        font-size: 12px;
      }

      /* Action Button */
      .action-button {
        width: 100%;
        padding: 12px;
        background: #7b6ee3;
        color: #fff;
        text-align: center;
        font-size: 16px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        transition: background 0.3s;
      }

      .action-button:hover {
        background: #6a5dd1;
      }

      /* OTP and Password Forms */
      .otp-form,
      .password-form {
        display: none;
        margin-top: 20px;
        background: #f9f9f9;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }

      .otp-form input,
      .password-form input {
        width: 100%;
        padding: 10px;
        margin-bottom: 10px;
        border: 1px solid #ccc;
        border-radius: 8px;
      }

      .otp-form button,
      .password-form button {
        width: 100%;
        padding: 12px;
        background: #7b6ee3;
        color: #fff;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        transition: background 0.3s;
      }

      .otp-form button:hover,
      .password-form button:hover {
        background: #6a5dd1;
      }

      .error-message {
        color: red;
        font-size: 14px;
        margin-bottom: 10px;
      }

      /* Guide Section */
      .guide-content {
        background-color: #f1f8ff;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }

      .guide-section {
        margin-bottom: 20px;
      }

      .guide-section h2 {
        font-size: 18px;
        font-weight: bold;
        margin-bottom: 10px;
      }

      .guide-section ol {
        list-style-type: decimal;
        padding-left: 20px;
        font-size: 16px;
      }

      .guide-section li {
        margin-bottom: 10px;
      }

      .hidden {
        display: none;
      }
      /* For Guide Content Section */
      .guide-content {
        background-color: #f1f8ff;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        margin-top: 10px;
        font-family: "Arial", sans-serif;
      }

      .guide-section h2 {
        font-size: 18px;
        font-weight: 600;
        color: #333;
        margin-bottom: 12px;
        padding-left: 10px;
        border-left: 3px solid #7b6ee3; /* Add a decorative line for emphasis */
      }

      .guide-section ol {
        font-size: 14px;
        color: #555;
        line-height: 1.6;
        padding-left: 20px;
        list-style-type: decimal;
      }

      .guide-section li {
        margin-bottom: 12px;
        padding-left: 10px;
        position: relative;
      }

      .guide-section li::before {
        content: "✔"; /* Adding checkmark style for list items */
        color: #2ebf59;
        font-size: 16px;
        position: absolute;
        left: -20px;
        top: 0;
      }

      .guide-section .setting-item {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 12px 15px;
        background-color: #f9f9f9;
        border-radius: 8px;
        cursor: pointer;
        transition: background-color 0.3s;
        margin-bottom: 10px;
      }

      .guide-section .setting-item:hover {
        background-color: #e0eaff;
      }

      .guide-section .setting-item i {
        font-size: 18px;
        color: #0066ff;
      }

      .guide-section .setting-item span {
        flex: 1;
        font-size: 16px;
        color: #333;
        margin-left: 10px;
      }

      .guide-section .setting-item i.bx-chevron-right {
        font-size: 20px;
        color: #555;
        transition: transform 0.3s ease;
      }

      .guide-section .setting-item i.bx-rotate-90 {
        transform: rotate(90deg); /* Rotate the chevron when expanded */
      }

      .section-content {
        padding-left: 20px;
        margin-top: 10px;
        transition: max-height 0.3s ease-out, opacity 0.3s ease-out;
        overflow: hidden;
        max-height: 0;
        opacity: 0;
      }

      .section-content.visible {
        display: block;
        max-height: 500px; /* Adjust as necessary */
        opacity: 1;
      }

      /* Make list items appear more attractive with padding */
      .section-content ol {
        padding-left: 20px;
        font-size: 14px;
        line-height: 1.6;
      }

      .section-content li {
        padding-left: 20px;
        font-size: 15px;
        margin-bottom: 10px;
      }

      /* Make sure the title text is prominent */
      .guide-section h2 {
        font-weight: bold;
        font-size: 16px;
        color: #444;
      }
      /* Ẩn phần chi tiết khi không hiển thị */
      .hidden {
        display: none;
      }

      .digital-otp-details {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .otp-info {
        background: #fff;
        border-radius: 10px;
        padding: 20px;
        max-width: 400px;
        text-align: center;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      }

      .otp-info .icon img {
        width: 60px;
        margin-bottom: 10px;
      }

      .otp-info h2 {
        color: #333;
        margin-bottom: 10px;
      }

      .otp-info p {
        color: #555;
        font-size: 14px;
        margin-bottom: 15px;
      }

      .otp-info ul {
        list-style: none;
        padding: 0;
        margin: 0 0 15px;
      }

      .otp-info ul li {
        display: flex;
        align-items: center;
        margin-bottom: 10px;
        font-size: 14px;
        color: #333;
      }

      .otp-info ul li i {
        color: #4a90e2;
        font-size: 18px;
        margin-right: 10px;
      }

      .continue-button {
        background-color: #4a90e2;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 14px;
      }

      .continue-button:hover {
        background-color: #357abd;
      }
      .hidden {
        display: none;
      }

      .visible {
        display: block;
      }

      /* Ẩn nội dung OTP theo mặc định */
      .digital-otp-details {
        display: none; /* Ẩn theo mặc định */
        position: absolute;
        top: 20%; /* Đẩy phần chi tiết xuống 20% từ trên */
        left: 0;
        width: 100%;
        background-color: rgba(
          0,
          0,
          0,
          0.7
        ); /* Đảm bảo nền đen mờ khi mở phần chi tiết */
        z-index: 100; /* Đặt phần OTP lên trên các phần khác */
        padding: 20px;
        box-sizing: border-box;
        height: 80vh; /* Chiếm 80% chiều cao màn hình */
        overflow-y: auto;
      }

      /* Khi phần OTP được hiển thị */
      .digital-otp-details.visible {
        display: block;
      }

      /* Thêm phần nội dung chi tiết OTP */
      .otp-info {
        background-color: #fff;
        padding: 20px;
        border-radius: 8px;
        max-width: 600px;
        margin: 0 auto;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }

      .otp-info h2 {
        font-size: 20px;
        margin-bottom: 15px;
        color: #333;
      }

      .otp-info ul {
        list-style-type: none;
        padding: 0;
      }

      .otp-info li {
        margin-bottom: 15px;
        font-size: 14px;
      }

      .otp-info .continue-button {
        padding: 10px 20px;
        background-color: #7b6ee3;
        color: #fff;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 16px;
        display: block;
        width: 100%;
        margin-top: 20px;
      }

      .otp-info .continue-button:hover {
        background-color: #6a5dd1;
      }
      .otp-registration-form button {
        background-color: #7b6ee3;
        color: white;
      }
      /* Face Authentication Setup */
      .face-auth-setup {
        border: 1px solid #e0e0e0;
        padding: 20px;
        border-radius: 12px;
        background-color: #ffffff;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        margin-top: 15px;
        text-align: center;
        transition: all 0.3s ease;
      }

      .face-auth-setup h3 {
        font-size: 20px;
        font-weight: bold;
        color: #333;
        margin-bottom: 10px;
      }

      .face-auth-setup p {
        font-size: 16px;
        color: #555;
        margin-bottom: 20px;
        line-height: 1.6;
      }

      .face-auth-setup ol {
        text-align: left;
        padding-left: 20px;
        margin-bottom: 20px;
      }

      .face-auth-setup ol li {
        font-size: 14px;
        color: #666;
        margin-bottom: 8px;
      }

      .face-auth-status {
        font-size: 14px;
        color: #4caf50;
        margin-top: 15px;
        font-weight: bold;
      }

      /* Start Button */
      .face-auth-setup button {
        background-color: #007bff; /* Màu xanh chuẩn */
        color: #fff;
        font-size: 16px;
        font-weight: bold;
        padding: 12px 24px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        box-shadow: 0 4px 6px rgba(0, 123, 255, 0.3);
        transition: background-color 0.3s ease, transform 0.2s ease;
      }

      .face-auth-setup button:hover {
        background-color: #0056b3; /* Xanh đậm hơn khi hover */
        transform: translateY(-2px); /* Hiệu ứng nhấn nút */
      }

      .face-auth-setup button:active {
        transform: translateY(0); /* Trở về trạng thái ban đầu khi click */
        background-color: #004494; /* Màu đậm hơn khi nhấn giữ */
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        .face-auth-setup {
          padding: 15px;
        }

        .face-auth-setup h3 {
          font-size: 18px;
        }

        .face-auth-setup p,
        .face-auth-setup ol li {
          font-size: 14px;
        }

        .face-auth-setup button {
          font-size: 14px;
          padding: 10px 20px;
        }
      }
    </style>
  </head>
  <body>
    <!-- Sidebar -->
    <div class="sidebar">
      <a href="#" class="logo">
        <i class="bx bx-code-alt"></i>
        <div class="logo-name"><span>TDH</span> Bank</div>
      </a>
      <ul class="side-menu">
        <li>
          <a href="home.html"><i class="bx bx-home"></i>Home</a>
        </li>
        <li>
          <a href="wallet.html"><i class="bx bx-wallet"></i>Wallet</a>
        </li>
        <li>
          <a href="transfer.html"><i class="bx bx-transfer-alt"></i>Transfer</a>
        </li>
        <li>
          <a href="saving.html"><i class="bx bx-leaf"></i>Saving</a>
        </li>
        <li>
          <a href="user.html"><i class="bx bx-group"></i>Users</a>
        </li>
        <li>
          <a href="historytransaction.html"
            ><i class="bx bx-bell"></i>History</a
          >
        </li>
        <li class="active">
          <a href="#"><i class="bx bx-cog"></i>Settings</a>
        </li>
      </ul>
      <ul class="side-menu">
        <li>
          <a href="logout.html" class="logout">
            <i class="bx bx-log-out-circle"></i>
            Logout
          </a>
        </li>
      </ul>
    </div>
    <!-- End of Sidebar -->

    <!-- Main Content -->
    <div class="content">
      <!-- Navbar -->
      <nav>
        <i class="bx bx-menu"></i>
        <form action="#">
          <div class="form-input">
            <input type="search" placeholder="Search..." />
            <button class="search-btn" type="submit">
              <i class="bx bx-search"></i>
            </button>
          </div>
        </form>
        <input type="checkbox" id="theme-toggle" hidden />
        <label for="theme-toggle" class="theme-toggle"></label>
        <a href="#" class="notif">
          <i class="bx bx-bell"></i>
          <span class="count">12</span>
        </a>
        <a href="#" class="profile">
          <img src="img/logo.png" />
        </a>
      </nav>

      <!-- End of Navbar -->

      <main>
        <div class="header">
          <a href="#" class="back-button"><i class="bx bx-arrow-back"></i></a>
          <h1>Cài đặt</h1>
          <a href="#" class="home-button"><i class="bx bx-home"></i></a>
        </div>
        <section class="settings">
          <div class="section">
            <div class="setting-item" onclick="toggleNotificationSettings()">
              <i class="bx bx-bell"></i>
              <span>Cài đặt thông báo</span>
              <i class="bx bx-chevron-right"></i>
            </div>

            <!-- Notification Settings Form -->
            <div
              id="notification-settings"
              class="notification-settings"
              style="display: none"
            >
              <h3>Cài đặt thông báo</h3>
              <p>Quản lý các thông báo bạn muốn nhận:</p>

              <div class="notification-option">
                <input type="checkbox" id="email-notifications" />
                <label for="email-notifications">Thông báo qua Email</label>
              </div>
              <div class="notification-option">
                <input type="checkbox" id="sms-notifications" />
                <label for="sms-notifications">Thông báo qua SMS</label>
              </div>
              <div class="notification-option">
                <input type="checkbox" id="app-notifications" />
                <label for="app-notifications">Thông báo từ ứng dụng</label>
              </div>

              <button onclick="saveNotificationSettings()">Lưu thay đổi</button>
            </div>

            <h2>Bảo mật</h2>
            <div class="setting-item" onclick="toggleDeviceManagement()">
              <i class="bx bx-devices"></i>
              <span>Quản lý thiết bị truy cập</span>
              <i class="bx bx-chevron-right"></i>
            </div>

            <!-- Device Management Section (hidden by default) -->
            <div
              class="device-management"
              id="device-management"
              style="display: none"
            >
              <div class="instruction">Chọn thiết bị cần hủy liên kết</div>
              <div class="instruction">
                Bạn đang liên kết với những thiết bị dưới đây.
              </div>

              <div class="checkbox-group">
                <input
                  type="checkbox"
                  id="select-all"
                  onclick="toggleSelectAll()"
                />
                <label for="select-all">Chọn tất cả thiết bị</label>
              </div>

              <div class="device-list">
                <div class="device-item">
                  <div class="device-name">
                    <input type="checkbox" id="device-1" />
                    <label for="device-1">Redmi Note 11-021024</label>
                  </div>
                  <span class="status">Hiện tại</span>
                </div>
                <div class="device-item">
                  <div class="device-name">
                    <input type="checkbox" id="device-2" />
                    <label for="device-2">Iphone 16 promax</label>
                  </div>
                  <span class="status">Hiện tại</span>
                </div>
              </div>

              <button class="action-button">Hủy liên kết</button>
            </div>

            <!-- Section for OTP Registration -->
            <div class="setting-item" onclick="showOTPRegistrationForm()">
              <i class="bx bx-lock"></i>
              <span>Đăng ký mã OTP</span>
              <i class="bx bx-chevron-right"></i>
            </div>

            <!-- OTP Registration Form (hidden by default) -->
            <div
              id="otp-registration-form"
              class="otp-registration-form"
              style="display: none"
            >
              <h3>Đăng ký mã OTP</h3>
              <div class="error-message" id="registration-error-message"></div>

              <!-- Enter Phone Number -->
              <label for="phone-number">Số điện thoại:</label>
              <input
                type="text"
                id="phone-number"
                placeholder="Nhập số điện thoại của bạn"
                required
              />

              <!-- Enter OTP sent to phone -->
              <label for="otp-code">Mã OTP:</label>
              <input
                type="text"
                id="otp-code"
                placeholder="Nhập mã OTP đã gửi"
                required
              />

              <!-- Create a PIN for OTP -->
              <label for="otp-pin">Mã PIN OTP:</label>
              <input
                type="password"
                id="otp-pin"
                placeholder="Tạo mã PIN OTP"
                required
              />

              <button onclick="registerOTP()">Đăng ký OTP</button>
            </div>

            <!-- Mã OTP kỹ thuật số Section -->
            <div class="setting-item" onclick="toggleDigitalOTPDetails()">
              <i class="bx bx-lock"></i>
              <span>Mã OTP kỹ thuật số</span>
              <i class="bx bx-chevron-right"></i>
            </div>

            <!-- Phần nội dung chi tiết OTP (Ẩn theo mặc định) -->
            <div id="digital-otp-details" class="digital-otp-details">
              <div class="otp-info">
                <div class="icon">
                  <img src="./img/baomat.jpg" alt="Shield Icon" />
                </div>
                <h2>Thông tin mã OTP kỹ thuật số</h2>
                <p>
                  Đây là phương thức xác thực giao dịch trực tuyến nâng cao.
                  Giải pháp người dùng xác thực giao dịch an toàn, thuận tiện
                  với các chức năng ưu việt
                </p>
                <ul>
                  <li>
                    <i class="bx bx-lock"></i>
                    <strong>Mã khoá riêng biệt:</strong> Mỗi thiết bị (điện
                    thoại, máy tính bảng) khi đăng ký mã OTP sẽ được cấp phát mã
                    khóa riêng.
                  </li>
                  <li>
                    <i class="bx bx-layer"></i>
                    <strong>Mã hóa nhiều tầng:</strong> Giải pháp sử dụng thuật
                    toán mã hóa đa lớp để sinh ra mã xác thực OTP.
                  </li>
                  <li>
                    <i class="bx bx-timer"></i>
                    <strong>Xác thực nhanh:</strong> Chỉ cần nhập PIN Digital
                    OTP, hệ thống tự động kích hoạt để xử lý mã hóa và xác thực
                    giao dịch.
                  </li>
                  <li>
                    <i class="bx bx-globe"></i>
                    <strong>Giao dịch toàn cầu:</strong> Giao dịch qua App ở mọi
                    nơi trên thế giới, chỉ cần điện thoại có kết nối mạng.
                  </li>
                </ul>
                <button
                  class="continue-button"
                  onclick="toggleDigitalOTPDetails()"
                >
                  Đóng
                </button>
              </div>
            </div>

            <div class="setting-item" onclick="showChangePasswordForm()">
              <i class="bx bx-lock"></i>
              <span>Đặt lại mật khẩu</span>
              <i class="bx bx-chevron-right"></i>
            </div>

            <!-- Form nhập mật khẩu cũ và mật khẩu mới (ẩn theo mặc định) -->
            <div class="password-form" id="password-form" style="display: none">
              <h3>Đặt lại khẩu</h3>
              <div class="error-message" id="error-message"></div>

              <!-- Nhập mật khẩu cũ -->
              <label for="current-password">Mật khẩu cũ:</label>
              <input
                type="password"
                id="current-password"
                placeholder="Nhập mật khẩu cũ"
                required
              />

              <!-- Nhập mật khẩu mới -->
              <label for="new-password">Mật khẩu mới:</label>
              <input
                type="password"
                id="new-password"
                placeholder="Nhập mật khẩu mới"
                required
              />

              <!-- Xác nhận mật khẩu mới -->
              <label for="confirm-password">Xác nhận mật khẩu mới:</label>
              <input
                type="password"
                id="confirm-password"
                placeholder="Xác nhận mật khẩu mới"
                required
              />

              <button onclick="changePassword()">Đổi mật khẩu</button>
            </div>

            <div class="setting-item" onclick="showResetOTPForm()">
              <i class="bx bx-lock"></i>
              <span>Đặt lại mã OTP</span>
              <i class="bx bx-chevron-right"></i>
            </div>

            <!-- Form nhập OTP hiện tại và OTP mới (ẩn theo mặc định) -->
            <div class="otp-form" id="otp-form">
              <h3>Nhập mã OTP hiện tại và mã OTP mới</h3>
              <div class="error-message" id="error-message"></div>

              <!-- Nhập mã OTP hiện tại -->
              <label for="current-otp">Mã OTP hiện tại:</label>
              <input
                type="text"
                id="current-otp"
                placeholder="Nhập mã OTP hiện tại"
                required
              />

              <!-- Nhập mã OTP mới -->
              <label for="new-otp">Mã OTP mới:</label>
              <input
                type="text"
                id="new-otp"
                placeholder="Nhập mã OTP mới"
                required
              />

              <!-- Nhập lại mã OTP mới -->
              <label for="new-otp">Mã lại OTP mới:</label>
              <input
                type="text"
                id="new-otp"
                placeholder="Nhập mã lại OTP mới"
                required
              />

              <button onclick="resetOTP()">Đặt lại OTP</button>
            </div>
            <!-- Setting item for guide -->
            <div class="setting-item" onclick="toggleGuide()">
              <i class="bx bx-lock"></i>
              <span>Hướng dẫn sử dụng</span>
              <i class="bx bx-chevron-right"></i>
            </div>

            <!-- Guide content -->
            <div id="guide-content" class="guide-content hidden">
              <!-- Đăng ký sử dụng Section -->
              <div class="guide-section">
                <div class="setting-item" onclick="toggleSection('register')">
                  <i class="bx bx-chevron-right"></i>
                  <span>Đăng ký sử dụng</span>
                </div>
                <div id="register" class="section-content hidden">
                  <ol>
                    <li>Đăng nhập App TDH Bank</li>
                    <li>Lựa chọn tiện ích / Thiết lập Digital OTP</li>
                    <li>Nhập mã kích hoạt và đặt mã PIN Digital OTP</li>
                    <li>Hoàn thành</li>
                  </ol>
                </div>
              </div>

              <!-- Xác thực giao dịch Section -->
              <div class="guide-section">
                <div
                  class="setting-item"
                  onclick="toggleSection('transaction')"
                >
                  <i class="bx bx-chevron-right"></i>
                  <span>Xác thực giao dịch</span>
                </div>
                <div id="transaction" class="section-content hidden">
                  <ol>
                    <li>Đăng nhập App TDH Bank</li>
                    <li>
                      Thực hiện giao dịch tài chính (chuyển tiền, thanh toán hóa
                      đơn,...)
                    </li>
                    <li>Xác thực giao dịch bằng PIN Digital OTP</li>
                    <li>Hoàn thành</li>
                  </ol>
                </div>
              </div>
            </div>

            <!-- Setting item for Face Authentication -->
            <div class="setting-item" onclick="showFaceAuthenticationSetup()">
              <i class="bx bx-face"></i>
              <span>Thiết lập xác thực khuôn mặt</span>
              <i class="bx bx-chevron-right"></i>
            </div>

            <!-- Face Authentication Setup Form (hidden by default) -->
            <div
              id="face-auth-setup"
              class="face-auth-setup"
              style="display: none"
            >
              <h3>Thiết lập xác thực khuôn mặt</h3>
              <p>
                Xác thực khuôn mặt giúp bảo mật tài khoản và giao dịch của bạn
                một cách tối ưu.
              </p>
              <ol>
                <li>Nhấn nút "Bắt đầu" để quét khuôn mặt của bạn.</li>
                <li>Di chuyển khuôn mặt theo hướng dẫn trên màn hình.</li>
                <li>
                  Khi hoàn tất, hệ thống sẽ lưu trữ khuôn mặt của bạn để xác
                  thực trong tương lai.
                </li>
              </ol>
              <button onclick="startFaceAuthentication()">Bắt đầu</button>
              <div
                id="face-auth-status"
                class="face-auth-status"
                style="margin-top: 20px"
              ></div>
            </div>

            <div class="setting-item">
              <i class="bx bx-fingerprint"></i>
              <span>Đăng nhập bằng vân tay</span>
              <div class="toggle">
                <input type="checkbox" id="fingerprint-toggle" checked />
                <label for="fingerprint-toggle"></label>
              </div>
            </div>
          </div>
        </section>
      </main>
    </div>

    <script>
      // Function to toggle device management section visibility
      function toggleDeviceManagement() {
        const deviceManagement = document.getElementById("device-management");
        if (deviceManagement) {
          deviceManagement.style.display =
            deviceManagement.style.display === "none" ? "block" : "none";
        }
      }

      // Function to handle the "Select All" checkbox behavior
      function toggleSelectAll() {
        const selectAllCheckbox = document.getElementById("select-all");
        const deviceCheckboxes = document.querySelectorAll(
          '.device-item input[type="checkbox"]'
        );

        // Set all device checkboxes to the same state as "Select All"
        deviceCheckboxes.forEach((checkbox) => {
          checkbox.checked = selectAllCheckbox.checked;
        });
      }

      // Function to handle the theme change
      function toggleThemeOptions() {
        const themeOptions = document.getElementById("theme-options");
        if (themeOptions) {
          themeOptions.style.display =
            themeOptions.style.display === "none" ? "block" : "none";
        }
      }

      // Function to change the theme
      function setTheme(mode) {
        if (mode === "dark") {
          document.documentElement.style.setProperty(
            "--background-color",
            "#333"
          );
          document.documentElement.style.setProperty("--text-color", "#fff");
        } else {
          document.documentElement.style.setProperty(
            "--background-color",
            "#f9f9f9"
          );
          document.documentElement.style.setProperty("--text-color", "#333");
        }
      }

      // Show/Hide OTP Reset Form
      function showResetOTPForm() {
        const otpForm = document.getElementById("otp-form");
        if (otpForm) {
          otpForm.style.display =
            otpForm.style.display === "none" || otpForm.style.display === ""
              ? "block"
              : "none";
        }
      }

      // Reset OTP logic
      function resetOTP() {
        const currentOtp = document.getElementById("current-otp").value;
        const newOtp = document.getElementById("new-otp").value;
        const errorMessage = document.getElementById("error-message");

        // Check if the OTP fields are filled in
        if (!currentOtp || !newOtp) {
          if (errorMessage)
            errorMessage.textContent =
              "Vui lòng nhập đầy đủ mã OTP hiện tại và mã OTP mới!";
          return;
        }

        // Simulated current OTP check (replace with actual backend logic)
        if (currentOtp !== "123456") {
          if (errorMessage)
            errorMessage.textContent = "Mã OTP hiện tại không đúng!";
          return;
        }

        // Successfully reset OTP
        alert(`Mã OTP đã được đặt lại thành: ${newOtp}`);

        // Hide the form after processing
        const otpForm = document.getElementById("otp-form");
        if (otpForm) otpForm.style.display = "none";
      }

      // Show/Hide Change Password Form
      function showChangePasswordForm() {
        const passwordForm = document.getElementById("password-form");
        if (passwordForm) {
          passwordForm.style.display =
            passwordForm.style.display === "none" ||
            passwordForm.style.display === ""
              ? "block"
              : "none";
        }
      }

      // Change Password logic
      function changePassword() {
        const currentPassword =
          document.getElementById("current-password").value;
        const newPassword = document.getElementById("new-password").value;
        const confirmPassword =
          document.getElementById("confirm-password").value;
        const errorMessage = document.getElementById("error-message");

        // Check if all fields are filled in
        if (!currentPassword || !newPassword || !confirmPassword) {
          if (errorMessage)
            errorMessage.textContent =
              "Vui lòng nhập đầy đủ tất cả các trường!";
          return;
        }

        // Simulate password check (replace with actual check)
        if (currentPassword !== "oldpassword") {
          if (errorMessage)
            errorMessage.textContent = "Mật khẩu cũ không đúng!";
          return;
        }

        // Check if new password matches confirm password
        if (newPassword !== confirmPassword) {
          if (errorMessage)
            errorMessage.textContent =
              "Mật khẩu mới và xác nhận mật khẩu không khớp!";
          return;
        }

        // Check if new password is long enough
        if (newPassword.length < 6) {
          if (errorMessage)
            errorMessage.textContent = "Mật khẩu mới phải ít nhất 6 ký tự!";
          return;
        }

        // Successfully changed password
        alert("Mật khẩu đã được thay đổi thành công!");
        const passwordForm = document.getElementById("password-form");
        if (passwordForm) passwordForm.style.display = "none";
      }

      // Show Face Authentication Message
      function showFaceAuthenticationMessage() {
        const messageElement = document.getElementById("face-auth-message");
        if (messageElement) {
          messageElement.style.display = "block"; // Show the message
        }
      }

      // Toggle visibility of the entire guide content
      function toggleGuideContent() {
        const guideContent = document.getElementById("guide-content");
        if (guideContent) {
          guideContent.classList.toggle("hidden");
        }
      }

      // Toggle visibility of individual sections inside the guide
      function toggleSection(sectionId) {
        const sectionContent = document.getElementById(sectionId);
        const settingItem = sectionContent
          ? sectionContent.previousElementSibling
          : null;

        if (sectionContent) {
          sectionContent.classList.toggle("visible");
          if (settingItem) {
            const icon = settingItem.querySelector("i");
            if (icon) {
              icon.classList.toggle("bx-rotate-90");
            }
          }
        }
      }

      // Toggle visibility of digital OTP details
      function toggleDigitalOTPDetails() {
        const otpDetails = document.getElementById("digital-otp-details");

        if (otpDetails) {
          otpDetails.classList.toggle("hidden");
        }
      }
      function toggleDigitalOTPDetails() {
        const otpDetails = document.getElementById("digital-otp-details");
        otpDetails.classList.toggle("visible"); // Chuyển trạng thái hiển thị phần chi tiết
      }
      function toggleDigitalOTPDetails() {
        const otpDetails = document.getElementById("digital-otp-details");
        const settingItem = document.querySelector(".setting-item");

        otpDetails.classList.toggle("visible");
        settingItem.classList.toggle("open");
      }
      // Toggle visibility of the guide content
      function toggleGuide() {
        const guideContent = document.getElementById("guide-content");
        if (guideContent) {
          guideContent.classList.toggle("hidden");
        }
      }

      // Toggle visibility of individual sections inside the guide
      function toggleSection(sectionId) {
        const sectionContent = document.getElementById(sectionId);
        const settingItem = sectionContent
          ? sectionContent.previousElementSibling
          : null;

        if (sectionContent) {
          sectionContent.classList.toggle("visible");
          if (settingItem) {
            const icon = settingItem.querySelector("i");
            if (icon) {
              icon.classList.toggle("bx-rotate-90");
            }
          }
        }
      }
      // Function to show OTP registration form
      function showOTPRegistrationForm() {
        const registrationForm = document.getElementById(
          "otp-registration-form"
        );
        registrationForm.style.display =
          registrationForm.style.display === "none" ||
          registrationForm.style.display === ""
            ? "block"
            : "none";
      }

      // Function to handle OTP registration logic
      function registerOTP() {
        const phoneNumber = document.getElementById("phone-number").value;
        const otpCode = document.getElementById("otp-code").value;
        const otpPin = document.getElementById("otp-pin").value;
        const errorMessage = document.getElementById(
          "registration-error-message"
        );

        // Basic validation: Check if all fields are filled in
        if (!phoneNumber || !otpCode || !otpPin) {
          if (errorMessage)
            errorMessage.textContent =
              "Vui lòng nhập đầy đủ tất cả các trường!";
          return;
        }

        // Simulate OTP verification (replace with actual OTP logic)
        if (otpCode !== "123456") {
          if (errorMessage) errorMessage.textContent = "Mã OTP không đúng!";
          return;
        }

        // Successfully registered OTP PIN
        alert(`Đăng ký mã OTP thành công với mã PIN: ${otpPin}`);

        // Hide the form after processing
        const registrationForm = document.getElementById(
          "otp-registration-form"
        );
        if (registrationForm) registrationForm.style.display = "none";
      }
      // Toggle visibility of notification settings
      function toggleNotificationSettings() {
        const settings = document.getElementById("notification-settings");
        if (settings) {
          settings.style.display =
            settings.style.display === "none" || settings.style.display === ""
              ? "block"
              : "none";
        }
      }

      // Save notification settings
      function saveNotificationSettings() {
        const emailNotifications = document.getElementById(
          "email-notifications"
        ).checked;
        const smsNotifications =
          document.getElementById("sms-notifications").checked;
        const appNotifications =
          document.getElementById("app-notifications").checked;

        // Simulate saving settings (you can replace this with actual API calls)
        alert(`Cài đặt thông báo đã được lưu:
- Email: ${emailNotifications ? "Bật" : "Tắt"}
- SMS: ${smsNotifications ? "Bật" : "Tắt"}
- App: ${appNotifications ? "Bật" : "Tắt"}`);

        // Hide settings after saving
        const settings = document.getElementById("notification-settings");
        if (settings) settings.style.display = "none";
      }
      function showFaceAuthenticationSetup() {
        const faceAuthSetup = document.getElementById("face-auth-setup");
        faceAuthSetup.style.display =
          faceAuthSetup.style.display === "none" ? "block" : "none";
      }

      function startFaceAuthentication() {
        const faceAuthStatus = document.getElementById("face-auth-status");
        faceAuthStatus.innerHTML = "Đang khởi động máy ảnh...";

        // Giả lập quá trình xác thực khuôn mặt
        setTimeout(() => {
          faceAuthStatus.innerHTML = `
            <p>Quét khuôn mặt thành công!</p>
            <p>Bây giờ bạn có thể sử dụng xác thực khuôn mặt để đăng nhập và thực hiện giao dịch an toàn hơn.</p>
        `;
        }, 3000); // Mô phỏng thời gian xử lý
      }
    </script>
    <script src="script.js"></script>
  </body>
</html>
